<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script type="text/javascript" src="tests/cardMagic.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <title>Behold, my stuff</title>
</head>
<body>
<ul>
<header>Welcome to The Casino!</header>
</ul>
    <div id="nav-placeholder"></div>
<script>
$(function(){
  $("#nav-placeholder").load("navbar.html");
});
</script>

<p>
  Gamble Rumble
</p>

<div id="player0"></div>
<div id="player1"></div>

<input type="Button" value="Random Cards" onclick="randomCards()">
<input type="Button" value="Deal Player 1 a Card" onclick="newCard(0)">
<input type="Button" value="Deal Player 2 a Card" onclick="newCard(1)">

<script>
  //Declaring global variables

  // Declaring card dimensions
  let cardWidth = 72;
  let cardHeight = 96;

  // Declaring hand counters
  let handCount=[0,0];
  

  //Deal player 1 and 2 a card to start
  newCard(0);
  newCard(1);
  
  function setCard(card)
  {
    let cardElem=document.getElementById(card.id);
  cardElem.style.backgroundPositionX=(-cardWidth*(card.rank))+"px";
  cardElem.style.backgroundPositionY=(-cardHeight*(card.suit))+"px";
  }

  function randomCards(){
    //handCount.length returns number of players
    for (let i=0; i<handCount.length; i++){
      //handCount[i] returns how many cards that player has
      for (let j=0; j<handCount[i]; j++){ 
        let suit=Math.floor(Math.random()*4);
        let rank=Math.floor(Math.random()*13);
        setCard({id:"player"+i+"card"+j,rank:rank,suit:suit});
      }
    }
  }

  function newCard(i){

    var newCardCanvas = document.createElement("canvas");
    newCardCanvas.id="player"+i+"card"+handCount[i];
    newCardCanvas.width=cardWidth+1;
    newCardCanvas.height=cardHeight+1;
    newCardCanvas.style="border:1px solid #000000;background:green; background-image:url('resources/cardSprites.png');";

    const currPlayer = document.getElementById("player"+i);
    document.body.insertBefore(newCardCanvas, currPlayer);
    setCard({id:newCardCanvas.id,rank:13,suit:0});
    handCount[i]++;
  }

</script>

 </body>
</html>
