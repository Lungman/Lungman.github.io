<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script type="text/javascript" src="tests/Alert.js"></script>
  <script type="text/javascript" src="tests/mathy.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <title>Behold, my stuff</title>
  <script type="text/javascript">
    function updateValues() {
      document.getElementById("reynoldsNum").innerHTML=Math.round(reynolds(document.getElementById('speed').value, document.getElementById('dia').value/1000));
      document.getElementById("frictionAnswer").innerHTML = haaland(document.getElementById('absoluteRoughness').value, document.getElementById('speed').value, document.getElementById('dia').value).toFixed(6);
      drawFunction1(document.getElementById('reynoldsNum').innerHTML,y_max);
    }
    
    var [x_0,y_0,x_max,y_max] = [0,0,0,0] 
  </script>
</head>
<body>
<ul>
<header>Welcome to the pipeflow section of the website of Tomorrow!</header>
</ul>
    <div id="nav-placeholder"></div>
<script>
$(function(){
  $("#nav-placeholder").load("navbar.html");
});
</script>
  
  
     <h3> hey what up it's pipe </h3>
  
  <div>
  <label>Velocity (m/s)</label><input type="number" id="speed" value="1"><br>
  <label>Diameter (mm)</label><input type="number" id="dia" value="150"><br>
  <label>Absolute Roughness (mm)</label><input type="number" id="absoluteRoughness" value="0.015"><br>
  <label>Reynolds Number:</label><label id="reynoldsNum" class="label_answer">0000</label>
  <label>Darcy friction factor:</label><label id="frictionAnswer" class="label_answer">0.00000</label><br>
  <input type="Button" value="Calculate" onClick=updateValues()>
  </div> <br>
  
    <canvas id="canvas" style="border:1px solid #000000;" width=900>
      This text is displayed if your browser does not support HTML5 Canvas.
  </canvas> <br>
  <label>Reynolds Number</label><input type="number" id="x_loc" value="10000">
  <button id="drawButton" onclick="drawFunction1(document.getElementById('x_loc').value,y_max)">draw a line</button>
  <script>
    var c = document.getElementById("canvas");
    var ctx = c.getContext("2d");
    

    var bgImg = new Image();
    bgImg.src = "./tests/Pipes/Moody.png";

    bgImg.onload=()=>{
    c.width=bgImg.width/2;
    c.height=bgImg.height/2;
    var hRatio = c.width/bgImg.width;
    var vRatio = c.height/bgImg.height;
    var ratio = Math.min(hRatio,vRatio);
    var ratio = c.width/bgImg.width;
    ctx.drawImage(bgImg,0,0,bgImg.width,bgImg.height,0,0,bgImg.width*ratio,bgImg.height*ratio);
      
      <!-- pixel locations of corners of graph from top left: x0,y0 = (79,665) x_max,y_max = (1077,42) --!>
    x_0 = c.width*(79/bgImg.width);
    y_0 = c.height*(665/bgImg.height);
    x_max = c.width*(1077/bgImg.width);
    y_max = c.height*(42/bgImg.height);
  }

function drawFunction1(x,y){
  var x_actual = (((Math.log10(x)-Math.log10(500))/(8-Math.log10(500)))*(x_max-x_0))+x_0;
  ctx.strokeStyle='red';
  ctx.lineWidth = 5;
  ctx.stroke();
  ctx.moveTo(x_actual,y_0);
  ctx.lineTo(x_actual,y);
  ctx.stroke();
}
    </script>
  
 </body>
</html>
